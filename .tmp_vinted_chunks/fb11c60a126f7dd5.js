(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,722546,e=>{"use strict";var t=e.i(549539),i=e.i(569144),a=e.i(900793),o=e.i(763506),r=e.i(197262),s=e.i(216688),n=e.i(536925),l=e.i(171831);e.s(["default",0,e=>{let{data:u,isStickyButton:d=!1}=e,{sellerId:S,canBuy:c,canInstantBuy:g,isReserved:f,isHidden:h,reservedForUserId:v,closetCountdownEndDate:C}=u,I=(e=>{var t;let{canBuy:a,canInstantBuy:o,isReserved:u,isHidden:d,reservedForUserId:S,closetCountdownEndDate:c}=e,{shippingDetails:g}=(0,r.useContext)(s.ShippingDetailsContext),{isCountdownActive:f}=(e=>{let t=Math.floor(Date.parse(e)/l.MS_PER_SECOND),[i,a]=(0,r.useState)(),[o,s]=(0,r.useState)(!!t),u=(0,r.useCallback)(()=>{let e,i,o;if(!t)return;let r=t-Math.floor(new Date().getTime()/l.MS_PER_SECOND);s(r>0),a((e=Math.floor(r/l.SECONDS_PER_DAY),i=Math.floor(r%l.SECONDS_PER_DAY/l.SECONDS_PER_HOUR),o=Math.floor(r%l.SECONDS_PER_HOUR/l.SECONDS_PER_MINUTE),{seconds:Math.floor(r%l.SECONDS_PER_MINUTE),minutes:o,hours:i,days:e}))},[t]);return(0,r.useEffect)(u,[u]),(0,n.useInterval)(u,o?l.MS_PER_SECOND:null),{formattedRemainingTime:i,isCountdownActive:o}})(c),h=null==(t=(0,i.useSession)().user)?void 0:t.id;return a&&o&&(!u||S===h)&&!d&&!!g&&!f})({canBuy:c,canInstantBuy:g,isReserved:f,isHidden:h,reservedForUserId:v,closetCountdownEndDate:C}),{user:E}=(0,i.useSession)(),b=S===(null==E?void 0:E.id),p=(e=>{let{isViewingOwnItem:t}=e;return!!((0,o.useBreakpoint)().phones&&!t)})({isViewingOwnItem:b});return b||!I||p!==d?null:(0,t.jsx)(a.ItemBuyerOfferModalContainer,{data:u})}],722546)},646875,e=>{"use strict";var t=e.i(549539),i=e.i(459831),a=e.i(197262),o=e.i(912194),r=e.i(790797),s=e.i(449155),n=e.i(532564),l=e.i(569144),u=e.i(399103),d=e.i(851802),S=e.i(576533),c=e.i(968014),g=e.i(188777),f=e.i(419516),h=e.i(826421),v=e.i(401438),C=e.i(491287),I=e.i(417565),E=e.i(763506),b=e.i(216688),p=e.i(536925),M=e.i(86728);e.s(["default",0,e=>{var m;let{data:D,isStickyButton:P=!1}=e,{itemId:_,sellerId:B,canBuy:N,canInstantBuy:O,isReserved:R,isHidden:U,reservedForUserId:y,closetCountdownEndDate:T}=D,w=(0,n.useTranslate)(),{track:x}=(0,s.useTracking)(),{searchParams:k}=(0,r.useBrowserNavigation)(),A=(e=>{var t;let{canBuy:i,canInstantBuy:o,isReserved:r,isHidden:s,reservedForUserId:n,closetCountdownEndDate:u}=e,{shippingDetails:d}=(0,a.useContext)(b.ShippingDetailsContext),{isCountdownActive:S}=(e=>{let t=Math.floor(Date.parse(e)/1e3),[i,o]=(0,a.useState)(),[r,s]=(0,a.useState)(!!t),n=(0,a.useCallback)(()=>{let e,i,a;if(!t)return;let r=t-Math.floor(new Date().getTime()/1e3);s(r>0),o((e=Math.floor(r/86400),i=Math.floor(r%86400/3600),a=Math.floor(r%3600/60),{seconds:Math.floor(r%60),minutes:a,hours:i,days:e}))},[t]);return(0,a.useEffect)(n,[n]),(0,p.useInterval)(n,r?1e3:null),{formattedRemainingTime:i,isCountdownActive:r}})(u),c=null==(t=(0,l.useSession)().user)?void 0:t.id;return i&&o&&(!r||n===c)&&!s&&!!d&&!S})({canBuy:N,canInstantBuy:O,isReserved:R,isHidden:U,reservedForUserId:y,closetCountdownEndDate:T}),j=(0,o.useOpenAuthFlow)(),F=(0,f.useConversationNavigator)(),H=(0,a.useRef)(void 0),K=(0,a.useCallback)(()=>{H.current=F.createNavigationStartMark()},[F]),{user:Y}=(0,l.useSession)(),{conversation:G,error:L,createConversation:W}=(0,I.useCreateConversation)(),{navigateToCheckout:q}=(0,v.useNavigateToCheckout)(),z=!!Y,J=null==Y?void 0:Y.id,Q=B===(null==J?void 0:J.toString()),V=(e=>{let{isViewingOwnItem:t}=e;return!!((0,E.useBreakpoint)().phones&&!t)})({isViewingOwnItem:Q}),X=(0,a.useRef)(!1),[Z,$]=(0,a.useState)(u.UiState.Idle),[ee,et]=(0,a.useState)(!1),ei=null==(m=k.referrer)?void 0:m.toString(),ea=(0,c.getSearchSessionData)(),eo=(0,a.useRef)("catalog"===ei?ea.searchSessionId:null),er=Q||!A||V!==P;return((0,a.useEffect)(()=>{L&&(et(!0),$(u.UiState.Idle))},[L]),(0,a.useEffect)(()=>{X.current||(X.current=!0,(0,M.incrementItemPageBuyButtonShowCounter)(!er))},[er]),(0,a.useEffect)(()=>{if(er||!(null==G?void 0:G.transaction)||Z!==u.UiState.Pending)return;let{transaction:e}=G,t=async()=>{await q(e.id,C.CheckoutOrderType.Transaction)&&(et(!0),$(u.UiState.Idle))};x((0,d.buyerWantItemEvent)({transactionId:e.id,itemId:Number(_),button:"buy",globalSearchSessionId:ea.globalSearchSessionId,globalCatalogBrowseSessionId:ea.globalCatalogBrowseSessionId,searchSessionId:eo.current,homepageSessionId:(0,S.getHomepageSessionIdFromUrl)()})),e.availableActions.includes(g.ApplicableTransactionAction.Buy)?(x((0,d.buyerBuyEvent)({transactionId:e.id,screen:"item",globalSearchSessionId:ea.globalSearchSessionId,globalCatalogBrowseSessionId:ea.globalCatalogBrowseSessionId,homepageSessionId:(0,S.getHomepageSessionIdFromUrl)()})),t()):F.navigate(G.id,{navigationStartMark:H.current})},[_,G,ea.globalSearchSessionId,ea.globalCatalogBrowseSessionId,x,Z,er,q,F]),er)?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Button,{styling:"filled",text:w("item.actions.buy"),onClick:e=>{(K(),Z===u.UiState.Pending)?e.preventDefault():z?($(u.UiState.Pending),W({itemId:_,receiverId:B,initiator:g.ConversationInitiatorType.Buy})):j()},testId:"item-buy-button",disabled:Z===u.UiState.Pending,isLoading:Z===u.UiState.Pending}),(0,t.jsx)(h.GenericErrorModal,{isShown:ee,onClose:()=>et(!1)})]})}],646875)},884348,e=>{"use strict";var t=e.i(549539),i=e.i(197262),a=e.i(339496);e.s(["default",0,e=>{let{children:o,shippingDetails:r}=e,s=(0,i.useMemo)(()=>({shippingDetails:r}),[r]);return(0,t.jsx)(a.default.Provider,{value:s,children:o})}])},90285,e=>{"use strict";let t=(0,e.i(197262).createContext)({pricingServices:null});e.s(["default",0,t])},947700,e=>{"use strict";var t=e.i(549539),i=e.i(197262),a=e.i(90285);e.s(["default",0,e=>{let{children:o,pricingServices:r}=e,s=(0,i.useMemo)(()=>({pricingServices:r}),[r]);return(0,t.jsx)(a.default.Provider,{value:s,children:o})}])}]);