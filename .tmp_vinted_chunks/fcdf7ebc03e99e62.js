(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,483100,(e,t,r)=>{var i=e.r(572632);t.exports=function(e){return"function"==typeof e?e:i}},463676,(e,t,r)=>{var i=e.r(22870),l=e.r(483100),n=e.r(684371),s=Math.min;t.exports=function(e,t){if((e=n(e))<1||e>0x1fffffffffffff)return[];var r=0xffffffff,a=s(e,0xffffffff);t=l(t),e-=0xffffffff;for(var o=i(a,t);++r<e;)t(r);return o}},320214,e=>{"use strict";var t,r=e.i(549539),i=e.i(331013);let l=e=>{let{onPageEnd:t}=e;return(0,r.jsx)(i.InView,{rootMargin:"0px 0px 1000px 0px",onChange:e=>{e&&t()},"data-testid":"blocks-observer"})};var n=e.i(459831),s=e.i(528024),a=e.i(449155),o=e.i(532564),c=e.i(263760);let d=e=>{let{onClick:t}=e,i=(0,o.useTranslate)(),{track:l}=(0,a.useTracking)();return(0,r.jsxs)("div",{className:"u-flexbox u-align-items-center u-flex-direction-column",children:[(0,r.jsx)(s.Spacer,{size:"large"}),(0,r.jsx)(n.Button,{theme:"primary",styling:"filled",text:i("feed.actions.load_more"),onClick:()=>{l((0,c.clickEvent)({target:"feed_load_more_button"})),t()},testId:"feed-load-more-button",inline:!0})]})},u=e=>e.showLoadMoreButton?(0,r.jsx)(d,{onClick:e.fetchMoreBlocks}):(0,r.jsx)(l,{onPageEnd:e.fetchMoreBlocks});var m=e.i(197262),p=e.i(830346),h=e.i(199052),g=e.i(45719),x=e.i(274214),b=e.i(929064),f=e.i(929802),y=e.i(562976),k=e.i(618925);let j=e=>{let{track:t}=(0,a.useTracking)(),l=(0,m.useRef)(!1);return(0,r.jsx)(i.InView,{onChange:r=>{l.current||r&&(l.current=!0,t((0,f.impressionEvent)({id:e.id,position:e.position,contentType:"ad",contentSource:"feed_ad"})))},children:(0,r.jsx)(k.default,{isIncremental:!0,shape:y.AdShape.Inbetween,renderFallback:e.renderFallback,suffix:e.suffix})})};var v=e.i(534111),w=e.i(7269),_=e.i(770570);let S=e=>{let{phones:t,tabletsUp:i}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"u-phones-only",children:(0,r.jsx)(s.Spacer,{size:s.Spacer.Size[t]})}),(0,r.jsx)("div",{className:"u-tablets-up-only",children:(0,r.jsx)(s.Spacer,{size:s.Spacer.Size[i]})})]})};var I=e.i(150245),B=e.i(342773),C=((t={}).Feed="feed",t);let T=e=>{var t,l;let{track:n}=(0,a.useTracking)(),s=(0,m.useRef)(!1),o=e.closet instanceof Promise?(0,m.use)(e.closet):e.closet;if(!o)return null==(t=e.renderFallback)?void 0:t.call(e);let c=o.showBanner?null==(l=e.vasEntryPoints)?void 0:l.find(e=>e.name===h.VasEntryPoint.PromotedClosets):void 0;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S,{phones:"Regular",tabletsUp:"Large"}),(0,r.jsx)(i.InView,{onChange:t=>{if(!s.current&&t){var r;let t;s.current=!0,n((0,w.impressionEvent)({id:o.user.id,position:e.position,contentType:"promoted_closet",contentSource:o.isPreview?"promoted_closets_preview":"promoted_closets",homepageSessionId:e.homepageSessionId})),o.isPreview&&(r=C.Feed,t=(0,B.getCurrentTimeInSeconds)(),(0,I.setLocalStorageItem)(`closet_preview_in_${r}_at`,t.toString()))}},"data-testid":`closet-promotion-${o.user.id}`,children:(0,r.jsx)(_.default,{wide:!0,banner:c,isPreview:!!o.isPreview,homepageSessionId:e.homepageSessionId,position:e.position,closet:o})}),e.suffix]})};var N=e.i(86187),P=e.i(751687),L=e.i(593617),E=e.i(123899);let z=e=>{let{suffix:t}=e,i=(0,o.useTranslate)("a11y"),l=()=>(0,r.jsx)(P.HorizontalScrollArea.Item,{className:"closet__item",children:(0,r.jsx)(E.ItemBoxSkeleton,{})});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S,{phones:"Regular",tabletsUp:"Large"}),(0,r.jsx)("div",{className:"closet-container",children:(0,r.jsx)(N.Cell,{styling:"tight",children:(0,r.jsx)("div",{className:"closet-container__item-horizontal-scroll",children:(0,r.jsxs)("div",{className:"closet closet--with-horizontal-scroll closet--wide",children:[(0,r.jsx)(N.Cell,{prefix:(0,r.jsx)(L.Skeleton,{width:48,height:48,circle:!0}),title:(0,r.jsx)(L.Skeleton,{width:96,height:20}),body:(0,r.jsx)(L.Skeleton,{width:120,height:20}),suffix:(0,r.jsx)(L.Skeleton,{width:120,height:32})}),(0,r.jsxs)(P.HorizontalScrollArea,{controlsScrollType:P.HorizontalScrollArea.ControlScrollType.Partial,showControls:!1,arrowLeftText:i("actions.move_left"),arrowRightText:i("actions.move_right"),children:[l(),l(),l(),l(),l(),l()]})]})})})}),(0,r.jsxs)("div",{className:"u-ui-padding-left-medium",children:[(0,r.jsx)(s.Spacer,{}),(0,r.jsx)(L.Skeleton,{width:140,height:18})]}),t]})};var F=e.i(149813),R=e.i(948176),A=e.i(646087),H=e.i(389400),$=e.i(89689),O=e.i(763506),V=e.i(569144),M=e.i(445826),U=e.i(569139),D=e.i(152351),X=e.i(474689),W=e.i(594526),q=e.i(144569),K=e.i(923134);let G={phones:1,tablets:3,default:4},J=e=>{let t=e.generateListerActivationBannerItem(e.position),{track:l}=(0,a.useTracking)(),n=(0,m.useRef)(!1),{ref:s}=(0,i.useInView)({onChange:r=>{r&&!n.current&&(l((0,q.impressionEvent)({id:t.catalogId,position:e.position,contentType:"lister_activation_banner",contentSource:"lister_activation_banner"})),n.current=!0)}});return t?(0,r.jsx)(K.default,{banner:t,onClose:()=>e.handleBannerDismiss(e.position),breakpointItemCount:G,ref:s}):null};var Q=e.i(592369),Y=e.i(167436),Z=e.i(698152);let ee=function(e){let{promoBoxCardStore:t}=(0,m.useContext)(Z.default),r=(0,m.useSyncExternalStore)(t.subscribe,()=>t.state,()=>null);return(0,m.useMemo)(()=>{var t;return null!=(t=null==r?void 0:r.map(Y.transformBrazePromoBoxCardDto).filter(t=>t.type===e))?t:[]},[r,e])};var et=e.i(198337),er=e.i(102103),ei=e.i(476309),el=e.i(924348);let en=e=>(0,r.jsx)(er.Card,{children:(0,r.jsxs)("article",{className:"u-ui-padding-horizontal-x2-large u-ui-padding-vertical-x-large",children:[(0,r.jsx)(el.Text,{as:"h2",text:e.title,type:"heading"}),(0,r.jsx)(s.Spacer,{size:"large"}),(0,r.jsx)(ei.Stack,{gap:"regular",as:"ul",wrap:!0,children:e.elements.map(e=>(0,r.jsx)("li",{className:"clickable-list-card__item",children:(0,r.jsx)(et.Bubble,{styling:"tight",children:(0,r.jsx)(N.Cell,{url:e.url,type:"navigating",styling:"narrow",children:(0,r.jsx)(el.Text,{type:"subtitle",theme:"amplified",bold:!0,text:e.title,as:"span"})})})},e.title))})]})}),es=e=>(0,r.jsx)("div",{className:"clickable-list-cards",children:e.cards.map(e=>(0,r.jsx)(en,{...e},e.title))});var ea=e.i(215985),eo=e.i(642319),ec=e.i(797586),ed=e.i(680706);let eu=e=>{let{promoBox:t,children:l,index:n,className:s}=e,{logCardImpression:a}=(0,m.useContext)(Z.default),o={[Q.PromoBoxType.Braze]:null==t?void 0:t.position,[Q.PromoBoxType.BrazeSticky]:0};return(null==t?void 0:t.isControl)&&n===o[t.type]?(0,r.jsx)(i.InView,{"data-testid":"control-promobox-tracker",onChange:e=>{e&&a(t.id)},className:s,children:l}):s?(0,r.jsx)("div",{className:s,children:l}):l};var em=e.i(256797),ep=e.i(160079),eh=e.i(640551);let eg=e=>{let{image:t,color:l,url:n,alt:s,impressionUrl:a,testId:c,onClick:d,onEnter:u}=e,m=(0,o.useTranslate)()("common.a11y.alt.promo_box"),{ref:p}=(0,i.useInView)({onChange:e=>{e&&(null==u||u())}});return(0,r.jsxs)("a",{href:n||void 0,className:"promo-box__container","data-testid":(0,ep.getTestId)(c,"promo-box"),onClick:d,ref:p,children:[(0,r.jsx)(eh.AspectRatio,{ratio:"1:2",children:(0,r.jsx)(em.Image,{role:"img",src:t,color:l,alt:s||m,scaling:"cover"})}),a&&(0,r.jsx)("img",{height:"1",width:"1",alt:"",style:{display:"none",border:0},src:a})]})};var ex=e.i(209601);let eb=e=>{let{items:t,cta:l,promoBox:n,homepageSessionId:s,header:d,itemTestId:u,handleErrorLogging:p,preventLog:h,testId:g,itemsFullWidthAlignment:x=!1}=e,{track:b}=(0,a.useTracking)(),f=(0,o.useTranslate)("a11y"),{handlePromoBoxClick:y,handlePromoBoxVisibility:k}=(e=>{let{logCardImpression:t,logCardClick:r}=(0,m.useContext)(Z.default),i=(0,m.useRef)(!1);return{handlePromoBoxVisibility:function(){e&&(e.type===Q.PromoBoxType.BrazeSticky&&t(e.id),i.current=!0)},handlePromoBoxClick:function(){e&&e.type===Q.PromoBoxType.BrazeSticky&&r(e.id)}}})(n),j=(0,m.useRef)([]),w=n&&!n.isControl;if(!t.length)return null;function _(e){let{itemId:t,isFollowEvent:r,itemContentSource:i}=e;b((0,c.clickEvent)({target:"favorite"})),b((0,c.favouriteItemEvent)({itemId:t,isFollowEvent:r,contentSource:i,homepageSessionId:s}))}return(0,r.jsxs)(r.Fragment,{children:[d,(0,r.jsxs)(P.HorizontalScrollArea,{controlsScrollType:P.HorizontalScrollArea.ControlScrollType.Partial,itemsFullWidthAlignment:x,arrowLeftText:f("actions.move_left"),arrowRightText:f("actions.move_right"),children:[w&&(0,r.jsx)(P.HorizontalScrollArea.Item,{className:"horizontally-scrollable-items__item",children:w?(0,r.jsx)("div",{className:"horizontally-scrollable-items__item-content",children:(0,r.jsx)(eg,{image:n.imageUrl,color:n.backgroundColor,url:n.url,alt:n.imageAlt,impressionUrl:n.impressionUrl,onEnter:k,onClick:y,testId:`${String(u)}-braze`})}):null}),t.map(function(e,t){let l=t+1+ +!!w;return(0,r.jsx)(P.HorizontalScrollArea.Item,{className:"horizontally-scrollable-items__item",testId:g,children:(0,r.jsx)(i.InView,{"data-testid":`horizontally-scrollable-item-${e.id}`,className:"horizontally-scrollable-items__item-content",onChange:t=>{let{id:r,user:i}=e;!t||j.current.includes(r)||(j.current.push(r),e.id||(0,ed.logHomeMessage)(`Missing item id (${e.id}) from ${e.contentSource}`,`Item URL: ${e.url}, user id: ${e.user.id}`),b((0,c.impressionEvent)({id:r,position:l,contentType:"item",contentSource:e.contentSource,itemOwnerId:i.id,homepageSessionId:s,metadata:e.metadata})))},children:(0,r.jsx)(eu,{promoBox:n,index:t,className:"u-flex-grow u-fill-width",children:(0,r.jsx)(v.ErrorBoundary,{FallbackComponent:ec.ComponentError,preventLog:h,onError:p,children:(0,r.jsx)(ex.TrackedProductItem,{item:e,tracking:{id:e.id,contentType:"item",contentSource:e.contentSource,position:l,homepageSessionId:s,metadata:e.metadata},onFavouriteToggle:_,showStatus:!0,testId:u&&`${u}-${e.id}`})})})})},e.id)}),l]})]})};eb.CtaItem=e=>{let{url:t,onClick:l,onEnter:n,content:s,testId:a}=e,o=()=>(0,r.jsx)("div",{className:"horizontally-scrollable-items__cta-content",children:(0,r.jsx)(N.Cell,{url:t,onClick:l,type:"navigating",theme:"transparent",testId:a,children:(0,r.jsx)(el.Text,{as:"h2",type:"title",theme:"muted",alignment:"center",width:"parent",text:s})})});return(0,r.jsx)(P.HorizontalScrollArea.Item,{className:"horizontally-scrollable-items__item",children:n?(0,r.jsx)(i.InView,{className:"u-fill-height",onChange:e=>e&&(null==n?void 0:n()),children:o()}):o()})};let ef=e=>{let{title:t,width:i}=e;return(0,r.jsx)(el.Text,{type:"heading",text:t,as:"h2",width:i?el.Text.Width[i]:void 0})},ey=e=>"phones"in e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"u-phones-only",children:(0,r.jsx)(s.Spacer,{size:s.Spacer.Size[e.phones]})}),e.tabletsUp&&(0,r.jsx)("div",{className:"u-tablets-up-only",children:(0,r.jsx)(s.Spacer,{size:s.Spacer.Size[e.tabletsUp]})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"u-mobiles-only",children:(0,r.jsx)(s.Spacer,{size:s.Spacer.Size[e.portables]})}),(0,r.jsx)("div",{className:"u-desktops-only",children:(0,r.jsx)(s.Spacer,{size:s.Spacer.Size[e.desktops]})})]});ey.Size=s.Spacer.Size;let ek=e=>{let{title:t,subtitle:l,name:o,items:d,promoBox:u,homepageSessionId:h,position:g,headerCta:x,itemCta:b,id:f}=e,{track:y}=(0,a.useTracking)(),k=(0,O.useBreakpoint)(),j=(0,m.useRef)(!1),v=(0,m.useRef)([]),w=e=>()=>{y((0,c.userClickHomepageBlockCta)({type:e,blockName:o,blockPosition:g,homepageSessionId:h,id:f}))},_=e=>()=>{v.current.includes(e)||(v.current.push(e),y((0,c.userViewHomepageBlockCta)({type:e,blockName:o,blockPosition:g,homepageSessionId:h,id:f})))};return(0,r.jsxs)(i.InView,{onChange:e=>{!e||j.current||(j.current=!0,y((0,c.userViewHomepageBlock)({blockName:o,blockPosition:g,homepageSessionId:h,id:f})))},children:[(0,r.jsx)(eb,{items:d,cta:b?(0,r.jsx)(eb.CtaItem,{url:b.url,onClick:w(p.ItemBlockCtaType.Item),content:b.title,testId:`${o}-item-cta`,onEnter:_(p.ItemBlockCtaType.Item)}):null,promoBox:u,header:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ey,{portables:"Large",desktops:"XLarge"}),(0,r.jsx)(N.Cell,{styling:k.portables?"tight":"narrow",title:(0,r.jsx)("div",{className:"homepage-layouts-text-truncation",children:(0,r.jsx)(ef,{title:t,width:"Parent"})}),body:l?(0,r.jsx)("div",{className:"homepage-layouts-text-truncation",children:(0,r.jsx)(el.Text,{type:"subtitle",width:"parent",text:l,as:"p"})}):null,testId:`${o}-header`,suffix:x&&(0,r.jsx)(i.InView,{onChange:e=>e&&_(p.ItemBlockCtaType.Header)(),children:(0,r.jsx)(n.Button,{url:x.url,onClick:w(p.ItemBlockCtaType.Header),styling:"flat",text:(0,r.jsx)(el.Text,{as:"span",theme:"primary",text:x.title}),aria:{"aria-label":x.accessibilityLabel||""},testId:`${o}-header-cta`})}),fullWidthTitle:!0}),(0,r.jsx)(ey,{portables:"Large",desktops:"Regular"})]}),homepageSessionId:h,itemTestId:o,preventLog:!0,testId:`${o}-block`,itemsFullWidthAlignment:!0}),(0,r.jsx)(s.Spacer,{size:"x-large"})]})},ej=e=>(0,r.jsx)(v.ErrorBoundary,{FallbackComponent:ec.ComponentError,preventLog:!0,onError:t=>(0,ed.logHomeError)(t,e.name),children:(0,r.jsx)(ek,{...e})});var ev=e.i(838124);let ew=e=>{let{name:t,position:l,id:n,homepageSessionId:o,headerProps:d,body:u,children:p,className:h}=e,{track:g}=(0,a.useTracking)(),x=(0,O.useBreakpoint)(),b=(0,m.useRef)(!1);return(0,r.jsxs)(i.InView,{onChange:e=>{!e||b.current||(b.current=!0,g((0,c.userViewHomepageBlock)({blockName:t,blockPosition:l,homepageSessionId:o,id:n})))},className:h,children:[(()=>{if(!d)return null;let{title:e,subtitle:i}=d;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N.Cell,{styling:"tight",title:(0,r.jsx)("div",{className:"homepage-layouts-text-truncation",children:(0,r.jsx)(ef,{title:e,width:"Parent"})}),body:i?(0,r.jsx)("div",{className:"homepage-layouts-text-truncation",children:(0,r.jsx)(el.Text,{type:"subtitle",width:"parent",text:i,as:"p"})}):null,testId:`${t}-header`,fullWidthTitle:!0}),x.phones?(0,r.jsx)(s.Spacer,{size:"regular"}):(0,r.jsx)(s.Spacer,{size:"large"})]})})(),u||p]})},e_=e=>{let{children:t,className:i}=e,l=(0,o.useTranslate)("a11y");return(0,r.jsx)(P.HorizontalScrollArea,{controlsScrollType:P.HorizontalScrollArea.ControlScrollType.Partial,arrowLeftText:l("actions.move_left"),arrowRightText:l("actions.move_right"),children:(0,r.jsx)("div",{className:i,children:t})})},eS=e=>{let{name:t,homepageSessionId:r}=e,{track:i}=(0,a.useTracking)(),l=(0,m.useRef)([]);return{handleItemClick:(e,l)=>()=>{i((0,c.userClickHomepageElement)({blockName:t,position:l+1,contentSource:e.contentSource,contentSourceLabel:e.title,contentSourceId:e.id,homepageSessionId:r,screen:"news_feed"}))},handleItemView:(e,n)=>s=>{if(!s)return;let a=e.id||e.title;l.current.includes(a)||(l.current.push(a),i((0,c.userViewHomepageElement)({blockName:t,position:n+1,contentSource:e.contentSource,contentSourceLabel:e.title,contentSourceId:e.id,homepageSessionId:r,screen:"news_feed"})))}}},eI=e=>{let{name:t,element:l,homepageSessionId:n,position:s,accessibilityLabel:a}=e,o=(0,O.useBreakpoint)(),{handleItemClick:c,handleItemView:d}=eS({name:t,homepageSessionId:n});return(0,r.jsx)(i.InView,{className:(0,ev.default)("single-row-element",`row-element-${s+1}`,{"row-element-mobile":!o.desktops}),onChange:d(l,s),children:(0,r.jsx)(er.Card,{children:(0,r.jsx)(N.Cell,{styling:"tight",clickable:!0,url:l.cta.url,type:"navigating",prefix:(0,r.jsx)(em.Image,{scaling:"cover",ratio:"square",src:l.photo.url,size:o.desktops?"x-large":"large"}),body:(0,r.jsx)("div",{className:"homepage-layouts-text-truncation",children:(0,r.jsx)(el.Text,{width:"parent",type:"subtitle",text:l.title,alignment:"left",theme:"amplified",as:"p",bold:!0})}),onClick:c(l,s),testId:"homepage-layouts-horizontal-rows",aria:{"aria-label":a||""}})})})},eB=e=>{let{elements:t,name:i,position:l,homepageSessionId:n,id:s,title:a,subtitle:o}=e,c=(0,O.useBreakpoint)();return(0,r.jsx)(ew,{name:i,position:l,homepageSessionId:n,id:s,headerProps:{title:a,subtitle:o},body:(0,r.jsx)(e_,{className:(0,ev.default)("horizontal-rows-block-container",{"horizontal-rows-desktop":c.desktops}),children:t.map((e,t)=>(0,r.jsx)(eI,{element:e,name:i,homepageSessionId:n,position:t,accessibilityLabel:e.cta.accessibilityLabel},`horizontal-rows-element-${l}-${e.title}`))})})},eC=e=>{let{handleItemClick:t,handleItemView:l}=eS(e),n=(0,O.useBreakpoint)();return(0,r.jsx)(ew,{...e,headerProps:e,body:(0,r.jsx)(e_,{className:"thumbnails-layout-container",children:e.elements.map((e,a)=>(0,r.jsx)(i.InView,{as:"article",onChange:l(e,a),className:"single-thumbnail-container single-thumbnail-container--icon",children:(0,r.jsx)(N.Cell,{styling:"tight",clickable:!0,url:e.cta.url,onClick:t(e,a),testId:"homepage-layouts-thumbnail",aria:{"aria-label":e.cta.accessibilityLabel||""},body:(0,r.jsxs)("div",{className:"single-thumbnail-container-body",children:[(0,r.jsx)("div",{className:"thumbnail-image--icon",children:(0,r.jsx)(em.Image,{src:e.photo.url,scaling:"cover",size:"regular"})}),(0,r.jsx)(s.Spacer,{}),(0,r.jsx)("div",{className:"thumbnail-title-wrapper homepage-layouts-text-truncation",children:(0,r.jsx)(el.Text,{width:"parent",type:n.desktops?"subtitle":"caption",text:e.title,alignment:"center",theme:"amplified",as:"h3"})})]})})},a))})})},eT=e=>{let t=(0,O.useBreakpoint)(),{imageSrc:i,title:l,ctaUrl:n,handleItemClick:s,style:a,accessibilityLabel:o}=e,c=a===p.ThumbnailsBlockStyle.BigImage,d=a===p.ThumbnailsBlockStyle.SmallRoundImage,u=c?t.tabletsUp:t.wide,m=d?"x2-large":void 0;return(0,r.jsx)("article",{className:"single-thumbnail-container",children:(0,r.jsx)(N.Cell,{styling:"tight",clickable:!0,url:n,onClick:s,testId:"homepage-layouts-thumbnail",aria:{"aria-label":o||""},body:(0,r.jsxs)("div",{className:"single-thumbnail-container-body",children:[(0,r.jsx)("div",{className:(0,ev.default)("thumbnail-image",{"thumbnail-image--small-round":d}),children:(0,r.jsx)(em.Image,{scaling:"cover",ratio:"square",src:i,size:u?m:c?"x4-large":d?"x2-large":"x3-large",styling:d?"circle":"rounded"})}),(0,r.jsx)(N.Cell,{styling:d?"narrow":"tight",children:(0,r.jsx)("div",{className:(0,ev.default)("thumbnail-title-wrapper","homepage-layouts-text-truncation",{"big-thumbnail-title":c,"small-round-thumbnail-title":d,"u-ui-padding-top-small":!d}),children:(0,r.jsx)(el.Text,{width:"parent",type:"title",text:l,alignment:d?"center":"left",as:"h3"})})})]})})})},eN=e=>{let{elements:t,title:l,name:n,homepageSessionId:s,style:a,subtitle:o}=e,{handleItemClick:c,handleItemView:d}=eS({name:n,homepageSessionId:s}),u=(0,O.useBreakpoint)();if(a===p.ThumbnailsBlockStyle.Icons)return(0,r.jsx)(eC,{...e});let m=a===p.ThumbnailsBlockStyle.BigImage?u.tabletsUp:u.wide;return(0,r.jsx)(ew,{...e,headerProps:{title:l,subtitle:o},body:(0,r.jsx)(e_,{className:(0,ev.default)("thumbnails-layout-container",{"u-justify-content-between":m}),children:t.map((e,t)=>(0,r.jsx)(i.InView,{onChange:d(e,t),className:"u-fill-width",children:(0,r.jsx)(eT,{title:e.title,imageSrc:e.photo.url,ctaUrl:e.cta.url,handleItemClick:c(e,t),style:a,accessibilityLabel:e.cta.accessibilityLabel})},t))})})},eP={light:"inverse",dark:"amplified"},eL=e=>{let{banner:t,type:l,onClick:a,onView:o}=e,c=(0,O.useBreakpoint)(),{title:d,icon:u,cta:m,background:p,textTheme:h,description:g,foreground:x}=t,b=c.phones,f=b?"mobile":"tablet",y=c.wide?"desktop":f;return(0,r.jsxs)(i.InView,{className:(0,ev.default)("block-banner__container",{"block-banner__container--narrow":"narrow"===l}),onChange:o,children:[(0,r.jsx)(em.Image,{scaling:"cover",src:p.url,color:p.dominantColor,alt:"",loading:"lazy"}),x&&(0,r.jsx)("div",{className:`block-banner__foreground block-banner__foreground--${l}-${y}`,children:(0,r.jsx)(em.Image,{scaling:"fill",src:x.url,alt:""})}),(0,r.jsx)("div",{className:"block-banner__info",children:(0,r.jsx)(N.Cell,{styling:"tight",theme:"transparent",children:(0,r.jsxs)("div",{className:"block-banner__info-content",children:[(0,r.jsxs)("div",{className:`block-banner__header-${l}-${y}`,children:[(0,r.jsx)(N.Cell,{theme:"transparent",prefix:(null==u?void 0:u.url)&&(0,r.jsx)(em.Image,{src:u.url,size:"regular",alt:""}),body:d&&(0,r.jsx)("div",{className:(0,ev.default)("block-banner__title",{"block-banner__title--phones":b}),children:(0,r.jsx)(el.Text,{text:d,width:"parent",type:b?"subtitle":void 0,as:"h2",theme:eP[h]})}),styling:"tight"}),(u||d)&&(0,r.jsx)(s.Spacer,{}),(0,r.jsx)("div",{className:(0,ev.default)("block-banner__description",{"block-banner__description--phones":b}),children:(0,r.jsx)(el.Text,{text:g,type:b?"title":"heading",width:"parent",as:"p",theme:eP[h],tabIndex:-1})})]}),(0,r.jsx)("div",{className:"block-banner__cta",children:(0,r.jsx)(n.Button,{aria:{"aria-label":`${d} ${g} ${m.title}`},text:m.title,theme:m.theme,inverse:m.inverse,size:b?"small":"medium",inline:!0,styling:"filled",truncated:!0,testId:"homepage-banner-cta",onClick:a,url:m.url})})]})})})]})},eE=e=>{let{elements:t,name:i,position:l,homepageSessionId:n,id:s}=e,{track:d}=(0,a.useTracking)(),u=(0,m.useRef)([]),p=(0,o.useTranslate)("a11y"),h=1===t.length?"wide":"narrow",g=(e,t)=>({blockName:i,position:t+1,contentSource:e.contentSource,contentSourceLabel:"",contentSourceId:e.id,homepageSessionId:n,screen:"news_feed"});return(0,r.jsx)(ew,{name:i,position:l,homepageSessionId:n,id:s,body:(0,r.jsx)(P.HorizontalScrollArea,{controlsScrollType:P.HorizontalScrollArea.ControlScrollType.Partial,arrowLeftText:p("actions.move_left"),arrowRightText:p("actions.move_right"),children:(0,r.jsx)("div",{className:`${h}-banners-layout-container`,children:t.map((e,t)=>(0,r.jsx)(eL,{banner:e,type:h,onClick:()=>{d((0,c.userClickHomepageElement)(g(e,t)))},onView:r=>{!r||u.current.includes(t)||(u.current.push(t),d((0,c.userViewHomepageElement)(g(e,t))))}},t))})})})},ez=e=>{let{children:t,prefix:i,suffix:l=(0,r.jsx)(ey,{phones:"XLarge",tabletsUp:"X3Large"}),as:n="section"}=e;return(0,r.jsxs)(n,{"data-testid":"homepage-block",className:"homepage-blocks__item",children:[i,t,l]})};var eF=e.i(65727),eR=e.i(575053);let eA=e=>{let{children:t,promoBoxes:i,index:l}=e,n=i.find(e=>e.isControl);return n?(0,r.jsx)(eu,{promoBox:n,index:l,children:(0,r.jsx)("div",{className:"u-fill-height",children:t})}):t},eH=(0,m.forwardRef)((e,t)=>(0,r.jsx)("div",{"data-testid":"grid-item",className:"homepage-blocks__item homepage-blocks__item--one-fifth",ref:t,children:(0,r.jsx)(v.ErrorBoundary,{FallbackComponent:ec.ComponentError,children:(0,r.jsx)(eA,{index:e.position-1,promoBoxes:e.brazePromoBoxes,children:e.children})})})),e$=e=>{let t=(0,m.useRef)(!1),{track:l}=(0,a.useTracking)(),{item:n,position:s,homepageSessionId:o}=e,d=(e=>{let{ref:t}=(0,i.useInView)({onChange:t=>{t&&e()}});return t})(()=>{t.current||(n.id||(0,ed.logHomeMessage)(`Missing item id (${n.id}) from ${n.contentSource}`,`Item URL: ${n.url}, user id: ${n.user.id}`),l((0,c.impressionEvent)({id:n.id,position:s,contentType:"item",contentSource:n.contentSource,itemOwnerId:n.user.id,homepageSessionId:o,metadata:n.metadata})),t.current=!0)});return(0,r.jsx)(eH,{ref:d,...e,children:(0,r.jsx)(ex.TrackedProductItem,{tracking:{id:n.id,contentType:"item",contentSource:n.contentSource,position:s,homepageSessionId:o,metadata:n.metadata},testId:"feed-item",item:n,showStatus:!0,showStatusAsBadge:!0,imageDisplayMode:e.imageDisplayMode,showCarouselIndicators:e.showCarouselIndicators,onFavouriteToggle:e=>{let{itemId:t,isFollowEvent:r,itemContentSource:i}=e;l((0,c.clickEvent)({target:"favorite"})),l((0,c.favouriteItemEvent)({itemId:t,isFollowEvent:r,homepageSessionId:o,contentSource:i}))}})})},eO=e=>(0,r.jsxs)("div",{className:"homepage-blocks__item",children:[(0,r.jsx)(ef,{title:e.title}),(0,r.jsx)(ey,{phones:"Regular",tabletsUp:"Large"})]}),eV=e=>{let{promoBox:t}=e,{logCardImpression:i,logCardClick:l}=(0,m.useContext)(Z.default);return(0,r.jsx)(eg,{image:t.imageUrl,color:t.backgroundColor,url:t.url,alt:t.imageAlt,impressionUrl:t.impressionUrl,onClick:()=>t.url&&l(t.id),onEnter:()=>i(t.id),testId:"feed-braze"})},eM=e=>(0,r.jsx)(eH,{...e,children:(0,r.jsx)(eV,{promoBox:e.promoBox})}),eU={phones:2,tablets:3,desktops:4,wide:5},eD=()=>{let e=(0,$.getFirstListedBreakpoint)((0,O.useBreakpoint)().active);return eU[null!=e?e:"desktops"]},eX=e=>p.SINGLE_SLOT_BLOCKS.includes(e.type)?1:2*!!p.TWO_SLOT_BLOCKS.includes(e.type);var eW=e.i(14640);let eq=e=>{let{test_anon_id:t,test_id:l,test_name:n,test_user_id:s,country_code:o,variant:c}=e,{track:d}=(0,a.useTracking)(),u=(0,m.useRef)(!1);return(0,r.jsx)(i.InView,{className:"u-fill-width",onChange:e=>{!e||u.current||(u.current=!0,d((0,eW.abTestExposeEvent)({anonId:t,id:l,name:n,userId:s?parseInt(s,10):void 0,countryCode:o,variant:c})))},"data-testid":`exposure-block-${l||n}`})},eK=e=>e&&(p.SINGLE_SLOT_BLOCKS.includes(e)||p.TWO_SLOT_BLOCKS.includes(e)),eG=e=>{let{children:t,previousBlockType:i,nextBlockType:l}=e,n=(0,r.jsx)("div",{className:"u-ui-padding-bottom-large@portables u-background-light u-breakout"});return(0,r.jsxs)(r.Fragment,{children:[eK(i)&&n,t,eK(l)&&n]})};var eJ=e.i(427518),eQ=e.i(536925),eY=e.i(184138),eZ=e.i(619790),e0=e.i(648203),e1=e.i(99009);let e2=function(e){let{itemId:t,receiverId:r,initiator:i,mode:l}=e,n="legacy"===l;return(0,eY.useSuspenseQuery)({retry:!1,queryKey:["conversations",t,r,i,l],queryFn:async()=>n?(0,e0.createItemConversationThread)({itemId:t,receiverId:r,initiator:i},{throwError:!0}):(0,e0.createInquiryNew)({itemIds:[t],receiverId:r},{throwError:!0}),select:e=>{if("errors"in e)throw Error("Unexpected errors response");return"conversation"in e?(0,e1.transformConversationResponse)(e.conversation):(0,e1.transformNewConversationResponse)(e)}},eZ.queryClient)};var e4=e.i(278983);let e6=function(e){let t=(0,R.useFeatureSwitch)("web_messaging_svc"),r=(0,e4.default)(),{data:i}=e2({...e,mode:t?"new":"legacy"});return{url:r.createUrl(i.id),beforeNavigation:(0,m.useCallback)(()=>r.createNavigationStartMark().store(),[r])}},e3=e=>{let{inquiry:t,onClick:i,...l}=e,{url:s,beforeNavigation:a}=e6(t);return(0,r.jsx)(n.Button,{...l,onClick:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];a(),null==i||i(...t)},url:s})},e9=e=>{let{inquiry:t,...i}=e,l=(0,eQ.useIsClient)(),s=(0,r.jsx)(n.Button,{...i,disabled:!0});return l?(0,r.jsx)(m.Suspense,{fallback:s,children:(0,r.jsx)(e3,{inquiry:t,...i})}):s};var e5=e.i(188777);let e8=e=>{let{children:t,prefix:i,suffix:l,as:n="section"}=e;return(0,r.jsxs)(n,{"data-testid":"homepage-block",className:"homepage-blocks__item homepage-blocks__item--two-fifths",children:[i,t,l]})};var e7=e.i(145218),te=e.i(840578),tt=e.i(660303),tr=e.i(726015),tr=tr;let ti=(e,t)=>((e,t)=>{let{locale:r,currency:i}=t,l=Number(e||0);return new Intl.NumberFormat(r,{currency:i,style:"currency",useGrouping:!1,minimumFractionDigits:2,maximumFractionDigits:2}).format(l)})(e.amount,{locale:t,currency:e.currencyCode}),tl=e=>{var t,i,l,n;let{locale:s}=(0,e7.useIntl)(),{item:a}=e;return(0,r.jsx)(tr.default,{description:{title:(null==(t=a.itemBox)?void 0:t.firstLine)||"",subtitle:(null==(i=a.itemBox)?void 0:i.secondLine)||""},testId:"homepage-accepted-offer-widget-price-breakdown",renderPriceBreakdown:(0,r.jsx)(te.ItemBoxPriceBreakdown,{...a,itemTitle:a.title,itemPhotoSrc:a.thumbnailUrl,testId:"homepage-accepted-offer-widget-price-breakdown"}),renderPrice:(0,r.jsx)(tt.ItemBoxPricing,{price:ti(a.priceWithDiscount||a.price,s),oldPrice:a.priceWithDiscount?ti(a.price,s):null,testId:"homepage-accepted-offer-widget-price"}),actions:null==(l=a.itemBox)?void 0:l.actions,itemId:null==(n=a.itemBox)?void 0:n.itemId})};var tn=e.i(820429);let ts=e=>{var t,l;let{track:n}=(0,a.useTracking)(),s=(0,O.useBreakpoint)();return(0,r.jsx)(tn.default,{feature:"accepted-offer-widget",children:(0,r.jsx)(e8,{prefix:(0,r.jsx)(ey,{phones:"XLarge"}),suffix:(0,r.jsx)(ey,{phones:"X2Large"}),children:(0,r.jsx)(i.InView,{as:"div",className:"homepage-accepted-offer-widget-wrapper",triggerOnce:!0,onChange:t=>{t&&((0,eJ.postHomepageAction)({blockName:e.name,payload:[String(e.item.id)]}),n((0,c.userViewHomepageElement)({blockName:e.name,position:1,contentSource:e.name,contentSourceId:String(e.item.id),homepageSessionId:e.homepageSessionId})))},children:(0,r.jsx)(er.Card,{children:(0,r.jsxs)(ew,{...e,id:String(e.item.id),className:"homepage-accepted-offer-widget",children:[(0,r.jsxs)(ei.Stack,{direction:"column",height:"content",children:[(0,r.jsx)(el.Text,{as:"h2",text:e.title,type:s.phones?"title":"heading"}),(0,r.jsx)(el.Text,{as:"p",text:e.subtitle,type:"subtitle"})]}),(0,r.jsx)("div",{className:"homepage-accepted-offer-widget__image homepage-accepted-offer-widget__image--tablets-up",children:(0,r.jsx)(em.Image,{src:e.item.thumbnailUrl,alt:(null==(t=e.item.itemBox)?void 0:t.accessibilityLabel)||"",ratio:"landscape"})}),(0,r.jsxs)(ei.Stack,{distribution:"space-in-between",alignment:"bottom",height:"content",gap:"regular",wrap:!0,children:[(0,r.jsxs)(ei.Stack,{gap:"regular",height:"content",children:[(0,r.jsx)("div",{className:"homepage-accepted-offer-widget__image homepage-accepted-offer-widget__image--phones",children:(0,r.jsx)(em.Image,{src:e.item.thumbnailUrl,ratio:"small-portrait",alt:(null==(l=e.item.itemBox)?void 0:l.accessibilityLabel)||""})}),(0,r.jsx)(tl,{item:e.item})]}),(0,r.jsx)("div",{className:"u-flexbox u-align-items-flex-end u-fill-height",children:(0,r.jsx)(e9,{inquiry:{itemId:String(e.item.id),receiverId:String(e.item.user.id),initiator:e5.ConversationInitiatorType.BuyerOffer},text:e.cta.body,onClick:()=>{n((0,c.clickEvent)({target:"homepage_accepted_offer_widget_cta",targetDetails:JSON.stringify({homepage_session_id:e.homepageSessionId,item_id:e.item.id})}))},styling:"filled",inline:s.desktops,size:"medium"})})]})]})})})})})},ta=e=>{var t,i;let l,n,s,{blocks:a}=e,o=(()=>{let{banners:e}=(0,W.default)(),t=(0,m.useRef)(new Map),r=(0,m.useRef)(!0);return{generateListerActivationBannerItem:(0,m.useCallback)(i=>{let l=t.current.get(i);if(l)return l;if(!r.current)return null;let n=(e=>{if(!e.length)return null;let t=Math.floor(Math.random()*e.length),r=e[t];return{...r,imageUrls:(0,D.default)(r.imageUrls)}})(e.listerActivation);return t.current.set(i,n),n},[e.listerActivation,r]),handleBannerDismiss:(0,m.useCallback)(e=>{t.current.delete(e),r.current=!1,(0,X.dismissBanner)("lister_activation")},[])}})(),{getStickyPromoBox:c}=(l=ee(Q.PromoBoxType.BrazeSticky)[0],n=!1,{getStickyPromoBox:()=>n?null:(n=!0,null!=l?l:null)}),{homepageSessionId:d}=(0,eF.useHomeContext)(),{currentTab:u}=(0,eR.default)(),f=!!(0,O.useBreakpoint)().portables,y=(0,M.useAbTest)("itembox_image_carousel");(0,eo.useTrackAbTest)(y,e=>f&&(0,ea.shouldTrackOncePerSessionDay)(e));let k=(null==y?void 0:y.variant)==="on",w=(0,M.useAbTest)("itembox_image_carousel_no_cues");(0,eo.useTrackAbTest)(w,e=>f&&k&&(0,ea.shouldTrackOncePerSessionDay)(e));let _=!(k&&(null==w?void 0:w.variant)==="on"),S=u.isPromoBoxEnabled,N=ee(Q.PromoBoxType.Braze),P=S?N:[],L=(i=(e=>{let t,{blocks:r,isFeedPromoBoxEnabled:i}=e,{getFloatingPromoBox:l}=(t=ee(Q.PromoBoxType.Braze),{getFloatingPromoBox:(0,m.useCallback)(e=>t.find(t=>t.position===e&&!t.isControl),[t])});return(0,m.useMemo)(()=>{if(!i)return r;let e=[],t=0;function n(r){p.SINGLE_SLOT_BLOCKS.includes(r.type)&&(t+=1),e.push(r)}return r.forEach(e=>{if((t-Q.PROMO_BOX_INDEX_IN_FEED_ROW)%Q.PROMO_BOX_PAGE_LENGTH==0){let e=l(t);e&&n({type:p.BlockEntityType.BrazePromobox,entity:e})}n(e)}),e},[r,l,i])})({blocks:a.blocks,isFeedPromoBoxEnabled:S}),s=eD(),(0,m.useMemo)(()=>{let e=[],t=[],r=0,l=[],n=[],a=()=>{e.push(...t,...l),t=n,r=n.reduce((e,t)=>e+eX(t),0),l=[],n=[],r>=s&&a()};return i.forEach(i=>{let o=eX(i);0===o?0===r?e.push(i):l.push(i):r+o>s?n.push(i):(t.push(i),(r+=o)>=s&&a())}),0===t.length?e.push(...l):e.push(...t),e},[i,s])),{renderClosetOrAdComponent:E}=(e=>{let t=(e=>{let t=(0,I.getLocalStorageItem)(`closet_preview_in_${e}_at`);if(!t)return!1;let r=Number(t);return(0,B.getCurrentTimeInSeconds)()-r<604800})(C.Feed),{data:i,error:l,fetchClosetPromotionEntryPoint:n}=(0,x.default)([h.VasEntryPoint.PromotedClosets],!e.arePromotedClosetsEnabled||!t),{closets:s,fetchClosetPromo:a}=(()=>{var e,t;let r=(0,O.useBreakpoint)(),i=(0,R.useFeatureSwitch)("killswitch_closet_promotion_web"),l=null==(t=(0,V.useSession)())||null==(e=t.user)?void 0:e.id,n=(0,M.useAbTest)("vas_api_gateway_swap_promoted_closets"),s=(null==n?void 0:n.variant)==="on",a=(0,U.useTrackAbTestCallback)(),o=(0,R.useFeatureSwitch)("web_api_gateway_client"),c=(0,R.useFeatureSwitch)("web_api_gateway_client_vas"),d=o&&c?A.getClosetPromotionsSvcVasApiGateway:A.getClosetPromotionsSvcVas,[u,p]=(0,m.useState)([]),h=(0,m.useRef)(!0),g=(0,m.useCallback)(async e=>{if((null==e?void 0:e.fresh)&&(p([]),h.current=!0),!(!i&&h.current))return null;let t=(null==e?void 0:e.fresh)?[]:u.map(e=>e.user.id),o={wide:4,desktops:4,tablets:5,phones:5}[(0,$.getFirstListedBreakpoint)(r.active)||"phones"],c=(null==e?void 0:e.catalogId)?{filters:{catalog_ids:e.catalogId},dynamicFilters:{}}:void 0,m=s?await d({perPage:o,excludedUserIds:t,screenName:"homepage",isPreview:null==e?void 0:e.isPreview,catalogFilterParams:c}):await (0,A.getClosetPromotions)({perPage:o,excludedUserIds:t,screenName:"homepage",isPreview:null==e?void 0:e.isPreview,catalogFilterParams:c});if(a(n),"errors"in m||"error"in m)return null;let g=s?(0,H.transformClosetsSvcVas)(m.promoted_closets):(0,H.transformClosets)(m.promoted_closets);if(h.current=m.page_info.has_more,(0,F.default)(g))return null;if(((null==e?void 0:e.fresh)||!u.length&&g.length>0)&&g[0]){g[0].showBanner=!0;let t=l===g[0].user.id;(null==e?void 0:e.isPreview)&&t&&(g[0].isPreview=!0)}return{newClosets:g,setClosets:()=>p(e=>[...e,...g])}},[i,u,r.active,l,n,s,a,d]),x=(0,m.useRef)(null);return{closets:u,fetchClosetPromo:(0,m.useCallback)(async e=>{if(x.current)return x.current;let t=g(e);x.current=t;let r=await t;return x.current=null,r},[g])}})(),o=(0,g.useLatestCallback)(async()=>{var r;let s;if(!e.arePromotedClosetsEnabled)return;i||l||t||(s=await n());let o=await a({isPreview:!!s,catalogId:e.catalogId});return null==o||null==(r=o.setClosets)||r.call(o),null==o?void 0:o.newClosets});return(e=>{let{vasEntryPoints:t,closets:i,areAdsEnabled:l,arePromotedClosetsEnabled:n,homepageSessionId:s,fetchMoreClosets:a}=e,o=(0,m.useRef)([]),c=0,d=0,u=async()=>{var e;let t=c,r=await (null==a?void 0:a());return null!=(e=null==r?void 0:r[t])?e:null},p=()=>n&&(i.filter(e=>!o.current.some(t=>(0,b.default)(e,t)))[0]||u())||null,h=e=>l?(0,r.jsx)(j,{...e}):null,g=(e,i,l)=>{let n={...l,vasEntryPoints:t,homepageSessionId:s};return e instanceof Promise?(c+=1,e.then(e=>{let t=l.renderFallback?"fallback-ad":"empty";o.current[i]=null!=e?e:t}),(0,r.jsx)(m.Suspense,{fallback:(0,r.jsx)(z,{suffix:l.suffix}),children:(0,r.jsx)(T,{...n,closet:e})})):(0,r.jsx)(v.ErrorBoundary,{children:(0,r.jsx)(T,{...n,closet:e})})},x=(e,t)=>{let r=o.current[t];if(r&&(e=>"ad"!==e&&"fallback-ad"!==e&&"empty"!==e)(r))return g(r,t,e);let i=p();return i?(o.current[t]=i,g(i,t,e)):(o.current[t]="empty",null)};return{renderClosetOrAdComponent:e=>{var t,i,n;let s=d,a=null!=(i=o.current[s])?i:s%2==0?null!=(n=p())?n:"fallback-ad":"ad";return(null!=(t=o.current)[s]||(t[s]=a),d+=1,"empty"===a)?null:"ad"===a?l?(0,r.jsx)(v.ErrorBoundary,{children:(0,r.jsx)(j,{...e,renderFallback:()=>x(e,s)})}):x(e,s):"fallback-ad"===a?h(e):g(a,s,{...e,renderFallback:()=>h(e)})}}})({...e,fetchMoreClosets:o,vasEntryPoints:i,closets:s})})({catalogId:null!=(t=u.catalogId)?t:void 0,arePromotedClosetsEnabled:u.feed.arePromotedClosetsEnabled,areAdsEnabled:u.feed.areAdsEnabled,homepageSessionId:d}),q=0;return(0,r.jsx)("div",{className:"homepage-blocks","data-testid":"homepage-blocks",children:L.map((e,t)=>{var i,l;return e.type===p.BlockEntityType.ExposureBlock?(0,m.createElement)(eq,{...e.entity,variant:null!=(i=e.entity.variant)?i:void 0,test_user_id:null!=(l=e.entity.test_user_id)?l:void 0,key:e.entity.test_id||e.entity.test_name}):e.type===p.BlockEntityType.Header?(0,m.createElement)(eO,{...e.entity,key:e.entity.title}):e.type!==p.BlockEntityType.ListerActivationBanner||o.generateListerActivationBannerItem(q)?(q+=1,(0,r.jsx)(m.Fragment,{children:((e,t,i)=>{var l,n,s;switch(e.type){case p.BlockEntityType.ItemBoxBlock:let a,m;return l=e.entity,a=L[i-1],m=L[i+1],(0,r.jsx)(ez,{suffix:(0,r.jsx)(ey,{portables:"XLarge",desktops:"XLarge"}),children:(0,r.jsx)(eG,{previousBlockType:null==a?void 0:a.type,nextBlockType:null==m?void 0:m.type,children:(0,r.jsx)(ej,{...l,promoBox:u.isPromoBoxEnabled?c():null,homepageSessionId:d,position:t})})});case p.BlockEntityType.ThumbnailsBlock:return n=e.entity,n.elements.length?n.style===p.ThumbnailsBlockStyle.TwoHorizontalRows?(0,r.jsx)(ez,{children:(0,r.jsx)(eB,{...n,position:t,homepageSessionId:d})}):(0,r.jsx)(ez,{children:(0,r.jsx)(eN,{...n,homepageSessionId:d,position:t})}):null;case p.BlockEntityType.BannersBlock:return s=e.entity,s.elements.length?(0,r.jsx)(ez,{children:(0,r.jsx)(eE,{...s,position:t,homepageSessionId:d})}):null;case p.BlockEntityType.AdOrCloset:return(0,r.jsx)(ez,{suffix:!1,children:E({position:t,id:`slot-${t}`,suffix:(0,r.jsx)(ey,{phones:"XLarge",tabletsUp:"X3Large"})})});case p.BlockEntityType.Item:let h;return h=e.entity,(0,r.jsx)(e$,{item:h,position:t,homepageSessionId:d,brazePromoBoxes:P,imageDisplayMode:k?"carousel":"single",showCarouselIndicators:_});case p.BlockEntityType.ListerActivationBanner:return(0,r.jsx)(ez,{suffix:!1,children:(0,r.jsx)(J,{...o,position:t})});case p.BlockEntityType.BrazePromobox:let g;return g=e.entity,(0,r.jsx)(eM,{promoBox:g,position:t,brazePromoBoxes:P});case p.BlockEntityType.ClickableListCards:let x;return x=e.entity,(0,r.jsx)(ez,{prefix:(0,r.jsx)(ey,{portables:"XLarge",desktops:"X2Large"}),suffix:(0,r.jsx)(ey,{portables:"XLarge",desktops:"X3Large"}),as:"div",children:(0,r.jsx)(es,{...x})});case p.BlockEntityType.AcceptedOfferWidget:return(0,r.jsx)(ts,{...e.entity,position:t,homepageSessionId:d});default:return null}})(e,q,t)},q)):null})})};var to=e.i(628244);let tc=()=>(0,r.jsx)(to.ContentLoader,{size:"large",styling:to.ContentLoader.Styling.Tight,testId:"homepage-loader"});var td=e.i(209039),tu=e.i(839685);let tm={status:200,code:e.i(294111).ResponseCode.Ok,message:"empty",errors:[],exception:null},tp=async e=>{let{tab:t,...r}=e,i=await (0,eJ.getHomepageTab)({tabName:t.name,...r});return(0,tu.isResponseError)(i)?i:0===i.blocks.length?tm:i},th=(e,t)=>{var r,i,l,n;switch(t.type){case"loading":return{blocks:null,isLoading:!0,error:null};case"error":return{blocks:null,isLoading:!1,error:t.payload};case"success":return{blocks:t.payload,isLoading:!1,error:null};case"more-blocks-loading":return{...e,isLoading:!0};case"more-blocks-success":return{blocks:{blocks:[...null!=(i=null==(r=e.blocks)?void 0:r.blocks)?i:[],...t.payload.blocks],showLoadMoreButton:t.payload.showLoadMoreButton,nextPageToken:t.payload.nextPageToken},isLoading:!1,error:null};case"more-blocks-failure":return{...e,blocks:{blocks:null!=(n=null==(l=e.blocks)?void 0:l.blocks)?n:[],showLoadMoreButton:!1,nextPageToken:null},isLoading:!1};default:return e}};var tg=e.i(463676);let tx=()=>(0,r.jsx)("div",{className:"homepage-blocks","data-testid":"homepage-skeleton",children:(0,tg.default)(20,e=>(0,r.jsx)("div",{className:"homepage-blocks__item homepage-blocks__item--one-fifth",children:(0,r.jsx)(E.ItemBoxSkeleton,{})},e))});var tb=e.i(747710);e.s(["default",0,e=>{let{initialData:t}=e,{blocks:i,areBlocksLoading:l,fetchMoreBlocks:n,error:s}=(e=>{var t;let{currentTab:r}=(0,eR.default)(),{homepageSessionId:i,setFetchTab:l}=(0,eF.useHomeContext)(),n=eD(),s=null==(t=(0,V.useSession)().user)?void 0:t.id,[a,o]=(0,m.useReducer)(th,{isLoading:!1,error:0===e.initialData.blocks.length?tm:null,blocks:e.initialData}),c=(0,g.useLatestCallback)(async e=>{o({type:"loading"});let t=performance.now(),r=await tp({homepageSessionId:i,nextPageToken:null,columnCount:n,tab:e}),l=(0,tu.isResponseError)(r);(0,ed.observeFetchDuration)(performance.now()-t,{isFirstPage:!0,isError:l}),l?((0,ed.logHomeMessage)(`Failed to fetch first page. ${r.message}`,`user_id=${s||"not_logged_in"}`),o({type:"error",payload:r})):o({type:"success",payload:(0,td.transformHomepageBlockResponse)(r,ed.logHomeError)})});(0,m.useEffect)(()=>{l(()=>c)},[c,l]);let d=async()=>{var e;let t=null==(e=a.blocks)?void 0:e.nextPageToken;if(!t)return;o({type:"more-blocks-loading"});let l=performance.now(),c=await tp({tab:r,homepageSessionId:i,nextPageToken:t,columnCount:n}),d=(0,tu.isResponseError)(c);if((0,ed.observeFetchDuration)(performance.now()-l,{isError:d}),d){o({type:"more-blocks-failure"}),(0,ed.logHomeMessage)(`Failed to fetch more. ${c.message}`,`user_id=${s||"not_logged_in"}`);return}o({type:"more-blocks-success",payload:(0,td.transformHomepageBlockResponse)(c,ed.logHomeError)})};return{blocks:a.blocks,areBlocksLoading:a.isLoading,error:a.error,fetchMoreBlocks:d}})({initialData:t}),a=!!(null==i?void 0:i.nextPageToken),o=a&&!(null==i?void 0:i.showLoadMoreButton)||l;return s?(0,r.jsx)(tb.default,{}):!i&&l?(0,r.jsx)(tx,{}):(0,r.jsxs)(r.Fragment,{children:[i&&(0,r.jsx)(ta,{blocks:i}),a&&!l&&(0,r.jsx)(u,{fetchMoreBlocks:n,showLoadMoreButton:i.showLoadMoreButton}),o&&(0,r.jsx)(tc,{})]})}],320214)}]);